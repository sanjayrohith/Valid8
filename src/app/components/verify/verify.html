<div class="verify-container">
  <div class="container">
    
    <!-- Page Header -->
    <header class="verify-header animate-fade-in">
      <div class="header-icon">üîç</div>
      <h1 class="page-title">
        <span class="gradient-text">Verify Certificate</span>
      </h1>
      <p class="page-subtitle">
        Instantly verify the authenticity of any NFT certificate on the blockchain
      </p>
    </header>

    <!-- Search Section -->
    <div class="search-section glass-card animate-fade-in">
      
      <!-- Search Type Toggle -->
      <div class="search-type-toggle">
        <button 
          class="toggle-btn" 
          [class.active]="searchType === 'tokenId'"
          (click)="searchType = 'tokenId'">
          <i class="fas fa-hashtag"></i>
          Token ID
        </button>
        <button 
          class="toggle-btn" 
          [class.active]="searchType === 'wallet'"
          (click)="searchType = 'wallet'">
          <i class="fas fa-wallet"></i>
          Wallet Address
        </button>
      </div>

      <!-- Search Input -->
      <div class="search-input-wrapper">
        <div class="search-icon">
          <i class="fas" [class.fa-hashtag]="searchType === 'tokenId'" [class.fa-wallet]="searchType === 'wallet'"></i>
        </div>
        <input 
          type="text" 
          class="search-input"
          [(ngModel)]="searchQuery"
          [placeholder]="searchType === 'tokenId' ? 'Enter Certificate Token ID (e.g., 1, 2, 3)' : 'Enter Ethereum Wallet Address (0x...)'"
          (keyup.enter)="search()"
        />
        @if (searchQuery) {
          <button class="clear-btn" (click)="clearSearch()">
            <i class="fas fa-times"></i>
          </button>
        }
      </div>

      <!-- Search Button -->
      <button 
        class="btn btn-primary btn-lg search-btn" 
        (click)="search()"
        [disabled]="isSearching || !searchQuery.trim()">
        @if (isSearching) {
          <span class="spinner"></span>
          Searching Blockchain...
        } @else {
          <i class="fas fa-search"></i>
          Verify Certificate
        }
      </button>

      <!-- Demo Hint -->
      <p class="demo-hint">
        <i class="fas fa-info-circle"></i>
        Try searching for Token IDs: <strong>1</strong>, <strong>2</strong>, or <strong>3</strong>
      </p>
    </div>

    <!-- Results Section -->
    @if (hasSearched) {
      <div class="results-section animate-fade-in">
        
        @if (verificationResult) {
          <!-- Verified Certificate -->
          <div class="result-card glass-card verified">
            
            <!-- Status Banner -->
            <div class="status-banner success">
              <div class="status-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="status-content">
                <h3>Certificate Verified</h3>
                <p>This credential is authentic and recorded on the Ethereum blockchain</p>
              </div>
              <div class="verified-badge">
                <i class="fas fa-check-circle"></i>
                Authentic
              </div>
            </div>

            <!-- Certificate Details -->
            <div class="certificate-details">
              
              <!-- Image Preview -->
              <div class="certificate-preview">
                <img [src]="verificationResult.imageUrl" [alt]="verificationResult.degree" />
                <div class="preview-overlay">
                  <button class="btn btn-sm btn-secondary">
                    <i class="fas fa-external-link-alt"></i>
                    View on IPFS
                  </button>
                </div>
              </div>

              <!-- Info Grid -->
              <div class="info-grid">
                
                <div class="info-card">
                  <div class="info-icon">
                    <i class="fas fa-user-graduate"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">Student Name</span>
                    <span class="info-value">{{ verificationResult.studentName }}</span>
                  </div>
                </div>

                <div class="info-card">
                  <div class="info-icon">
                    <i class="fas fa-scroll"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">Degree / Certificate</span>
                    <span class="info-value">{{ verificationResult.degree }}</span>
                  </div>
                </div>

                <div class="info-card">
                  <div class="info-icon">
                    <i class="fas fa-university"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">Issuing Institution</span>
                    <span class="info-value">{{ verificationResult.institution }}</span>
                  </div>
                </div>

                <div class="info-card">
                  <div class="info-icon">
                    <i class="fas fa-calendar-alt"></i>
                  </div>
                  <div class="info-content">
                    <span class="info-label">Date Issued</span>
                    <span class="info-value">{{ formatDate(verificationResult.dateIssued) }}</span>
                  </div>
                </div>

              </div>

              <!-- Blockchain Info -->
              <div class="blockchain-info">
                <h4>
                  <i class="fas fa-link"></i>
                  Blockchain Record
                </h4>
                
                <div class="blockchain-grid">
                  <div class="blockchain-item">
                    <span class="blockchain-label">Token ID</span>
                    <span class="blockchain-value font-mono">#{{ verificationResult.tokenId }}</span>
                  </div>
                  
                  <div class="blockchain-item">
                    <span class="blockchain-label">Owner Wallet</span>
                    <div class="value-with-copy">
                      <span class="blockchain-value font-mono">{{ truncateAddress(verificationResult.ownerAddress) }}</span>
                      <button class="copy-btn" (click)="copyToClipboard(verificationResult.ownerAddress)">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>
                  
                  <div class="blockchain-item">
                    <span class="blockchain-label">Transaction Hash</span>
                    <div class="value-with-copy">
                      <span class="blockchain-value font-mono">{{ truncateHash(verificationResult.transactionHash) }}</span>
                      <a href="https://sepolia.etherscan.io/tx/{{ verificationResult.transactionHash }}" 
                         target="_blank" 
                         class="external-link">
                        <i class="fas fa-external-link-alt"></i>
                      </a>
                    </div>
                  </div>
                  
                  <div class="blockchain-item">
                    <span class="blockchain-label">IPFS Hash</span>
                    <div class="value-with-copy">
                      <span class="blockchain-value font-mono">{{ truncateHash(verificationResult.ipfsHash) }}</span>
                      <a href="https://ipfs.io/ipfs/{{ verificationResult.ipfsHash }}" 
                         target="_blank" 
                         class="external-link">
                        <i class="fas fa-external-link-alt"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        } @else {
          <!-- Not Found -->
          <div class="result-card glass-card not-found">
            <div class="not-found-content">
              <div class="not-found-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <h3>Certificate Not Found</h3>
              <p>{{ errorMessage }}</p>
              <div class="not-found-tips">
                <h4>Possible reasons:</h4>
                <ul>
                  <li>The Token ID may be incorrect</li>
                  <li>The certificate may not exist on the blockchain</li>
                  <li>The wallet address may not own any certificates</li>
                </ul>
              </div>
              <button class="btn btn-secondary" (click)="clearSearch()">
                <i class="fas fa-redo"></i>
                Try Another Search
              </button>
            </div>
          </div>
        }
        
      </div>
    }

    <!-- Features Section -->
    @if (!hasSearched) {
      <div class="features-section animate-fade-in">
        <div class="grid grid-3">
          <div class="feature-card glass-card glass-card-hover">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <h3>Instant Verification</h3>
            <p>Verify any certificate in seconds by querying the blockchain directly</p>
          </div>
          <div class="feature-card glass-card glass-card-hover">
            <div class="feature-icon">
              <i class="fas fa-lock"></i>
            </div>
            <h3>Tamper-Proof</h3>
            <p>Certificates are immutably stored on Ethereum, impossible to forge</p>
          </div>
          <div class="feature-card glass-card glass-card-hover">
            <div class="feature-icon">
              <i class="fas fa-globe"></i>
            </div>
            <h3>Decentralized</h3>
            <p>No central authority needed - verify credentials anywhere, anytime</p>
          </div>
        </div>
      </div>
    }

  </div>
</div>
